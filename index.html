<html>
    <head>
        <meta charset="utf-8">
        <title>DS 233 Marketing Analytics</title>
        <meta name="author" content="Karen Hovhannisyan">
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/css/theme/simple.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai-sublime.css">
        
        <style>
            p{
                text-align: justify;
            }

            h2{
                /* text-align: left; */
                font-weight: bold;
            }

            h3{
                /* text-align: left; */
                font-weight: bold;
            }

            #left {
                margin: 10px 0 15px 20px;
                text-align: center;
                float: left;
                z-index:-10;
                width:48%;
                font-size: 0.85em;
                line-height: 1.5; 
            }

            #right {
                margin: 10px 0 15px 0;
                float: right;
                text-align: center;
                z-index:-10;
                width:48%;
                font-size: 0.85em;
                line-height: 1.5; 
            }

            #box-container {
                display: flex;
                text-align: center;
                }

                #box-1 {
                /* background-color: dodgerblue; */
                width: 20%;
                text-align: center;
                }

                #box-2 {
                /* background-color: orangered; */
                width: 38%;
                text-align: center;
                }

                #box-3 {
                /* background-color: green; */
                width: 38%;
                text-align: center;
                }

        </style>
        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
    <div class="reveal">

      <!-- Any section ment inside of this container is displayed as a slide -->
     <div class="slides">


<!-- Slide 1 -->
<section>
<h2>Marketing Analytics</h2>
<br><br>
<h4>Garo Bozadjian, AUA</h4>

<h4>FastAPI Tutorial</h3>
</section>

<!-- Slide 2 -->
<section> 
    <h2>Objective</h2>

<!-- - Why should you know?
- Intro to HTML document layout
- Intro to HTML document components
- Intro to CSS -->
<ul>
    <li>Intro to FastAPI</li>
    <li>Install FastAPI and Unicorn</li>
    <li>First Steps to Create API</li>
    <li>Get, Put, Post, Delete </li>
    <li>Connect to the data with pandas</li>
</ul>
</section>
    
 <!-- Slide  -->

<!-- Slide 3 -->
<section>
    <h2> Expected outcome</h2>
    
    <p>By the end of the problem-solving session, you should be able to:</p>
    <br>
    <small>
        <ul>
            <li>Understand core concepts of FastAPI.</li>
            <li>Feel comfortable with creating FastAPI for your project.</li>
            <li>Understand the concepts of requestes and how to connect to your data.</li>
        </ul>
    </small>
</section>

<!-- what is FastApi-->
<section>
    <!-- Slide 5-->
    <section><h2>FastAPI</h2> </section>
    <!-- Slide 6-->
    <section>
        <h3>What is FastAPI?</h3>
         <p>FastAPI is a modern, fast (high-performance), web framework for building APIs with Python 3.7+ based on standard Python type hints.</p>
        
    </section>

    <!-- Slide 7-->
    <section>
        <h3>FastApi key features (1)</h3>
        <p><b>Fast</b>: Very high performance, on par with NodeJS and Go.</p>
        <p><b>Fast to code</b>:Increase the speed to develop features by about 200% to 300%.</p>
        <p><b>Fewer bugs</b>:Reduce about 40% of human (developer) induced errors.</p>
    </section>
    <section>
        <h3>FastApi key features (2)</h3>
        <p><b>Intuitive</b>:Great editor support. Completion everywhere. Less time debugging</p>
        <p><b>Easy</b>:Designed to be easy to use and learn. Less time reading docs.</p>
        <p><b>Short</b>:Minimize code duplication. Multiple features from each parameter declaration. Fewer bugs.</p>
        <p><b>Robust</b>:Get production-ready code. With automatic interactive documentation.</p>

    </section>
</section>


<!-- Installing FastAPI-->
<section>
    <!-- Slide 9-->
    <section>
        <h2>Install FastAPI and Unicorn</h2>
     </section>
     <!-- Slide 10-->
     <section>
        <h3>Installing FastAPI</h3>
        <p>To install Fast API you need to go to your terminal and type:</p>
        <pre class="'pyhton">
            <code>
                pip install fastapi
            </code>
        </pre>
    </section>
    
    
     <!-- Slide 11-->
     <section>
        <h3>Install Unicore</h3>
        <p>To install Unicorn you need to go to your terminal and type:</p>
        <pre class="'pyhton">
            <code>
                pip install "uvicorn[standard]"
            </code>
        </pre>
    </section>
</section>


<!-- First Steps to Create API -->
<section>
    <!-- Slide 13 -->
    <section>
        <h2>First Steps to Create API</h2>
        
    </section>

     <!-- Slide 14 -->
    <section>
        <h3>The simplest API (1)</h3>
        <p>Create a folder call it<b>FastAPI</b> in it create <b>main.py</b> and in <b>main.py</b> type the code below</p>
        <pre class="python">
            <code>
                from fastapi import FastAPI
                app = FastAPI()
                
                @app.get("/")
                async def root():
                    return {"message": "Hello World"}
            </code>
        </pre>
        <p>to run this code go to your terminal and type</p>
        <pre class="python">
            <code>
                unicorn main:app --reload
            </code>
        </pre>      
        
    </section>

    <section>
        <h3>The simplest API (2)</h3>
        <p>After running the above code you will see this screen in your terminal</p>
        <pre class="python">
            <code>
                INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
                INFO:     Started reloader process [28720]
                INFO:     Started server process [28722]
                INFO:     Waiting for application startup.
                INFO:     Application startup complete.
            </code>
        </pre>
    </section>

    <section>
        <h3>The simplest API (3)</h3>
        <p>Copy and paste <b>http://127.0.0.1:8000</b> in your browser. it will open empty page,later add<b>/docs</b> or <b>/redoc</b> after <b>http://127.0.0.1:8000</b></p>      
        
    </section>
</section>

<!-- Get, Put, Post, Delete -->
<section>
    <!-- Slide 3 -->
    <section><h2>Get, Put, Post, Delete</h2> </section>
    <!-- Slide 4 -->
    <section>
        <h3>Operations or HTTP methods(1)</h3>
        <ul>
            <li><b>POST</b>: to create data..</li>
            <li><b>GET</b>: to read data.</li>
            <li><b>PUT</b>: to update data.</li>
            <li><b>DELETE</b>: to delete data.</li>
        </ul>
    </section>
    <section>
        <h3>GET</h3>
        <pre class="python">
            <code>
                @app.get("/")
                async def root():
                    return {"message": "Hello World"}
            </code>
        </pre>
    </section>
    <!-- Slide 5 -->
    <section>
        <h2>POST</h2>
        <pre class="python">
            <code>
            @app.post("/items/")
            async def create_item(item: Item):
                return item
            </code>
        </pre>
    </section>
    <!-- Slide 6 -->
    <section>
        <h3>PUT</h3>
        <pre class="python">
            <code>
                @app.put("/items/{item_id}")
                async def create_item(item_id: int, item: Item):
                    return {"item_id": item_id, **item.dict()}
            </code>
        </pre>
    </section>
    <!-- Slide 7 -->
    <section>
        <h3>DELETE</h3>
        <pre class="python">
            <code>
                @app.delete("/heroes/{hero_id}")
                def delete_hero(hero_id: int):
                    with Session(engine) as session:
                        hero = session.get(Hero, hero_id)
                        if not hero:
                            raise HTTPException(status_code=404, detail="Hero not found")
                        session.delete(hero)
                        session.commit()
                        return {"ok": True}
            </code>
        </pre>
    </section>
</section>
<!-- Branching -->
<section>
    <section><h2>Connect to the data with pandas</h2> </section>
    <!-- Slide 10 -->
    <section>
        <h3>Simple way to connect to pandas and get data</h3>
        <pre class="python">
            <code>
                from fastapi import FastAPI
                import pandas as pd

                data=pd.read_csv('data.csv')
                app = FastAPI()
                
                @app.get("/")
                async def root():
                    return {"message": "Hello World"}
                
                @app.get("/get_data/{record_id}")
                async def get_record(record_id: int):
                    record = data[data['ID'] == record_id].to_dict(orient='records')
                    if len(record) == 0:
                        return {"error": "Record not found"}
                    return record[0]
            </code>
        </pre>
    </section>

    <!-- Slide 11 -->
    
    <Section>
        <h3>Update the data with FastAPI from csv</h3>
        <pre class="python">
            <code>
                from fastapi import FastAPI, HTTPException
                import pandas as pd

                app = FastAPI()

                # Load data from the CSV file
                data = pd.read_csv('data.csv')

                # Update a specific record by ID
                @app.put("/update_data/{record_id}")
                async def update_record(record_id: int, new_data: dict):
                    # Find the index of the record to be updated
                    index = data[data['ID'] == record_id].index
                    if len(index) == 0:
                        raise HTTPException(status_code=404, detail="Record not found")
                    
                    # Update the record
                    data.loc[index] = new_data

                    # Save the updated data back to the CSV file
                    data.to_csv('data.csv', index=False)

                    return {"message": "Record updated successfully"}
            </code>
        </pre>
    </Section>
    <!-- Slide 12 -->

    <Section>
        <h3>Delete the data with FastAPI from csv</h3>
        <pre class="python">
            <code>
                from fastapi import FastAPI, HTTPException
import pandas as pd

app = FastAPI()

# Load data from the CSV file
data = pd.read_csv('data.csv')

# Delete a specific record by ID
@app.delete("/delete_data/{record_id}")
async def delete_record(record_id: int):
    # Find the index of the record to be deleted
    index = data[data['ID'] == record_id].index
    if len(index) == 0:
        raise HTTPException(status_code=404, detail="Record not found")

    # Delete the record
    data.drop(index, inplace=True)

    # Save the updated data back to the CSV file
    data.to_csv('data.csv', index=False)

    return {"message": "Record deleted successfully"}
            </code>
        </pre>
    </Section>
    <section>
        <h3>Creating data with FastAPI from csv</h3>
        <pre class="python">
            <code>
                from fastapi import FastAPI, HTTPException
import pandas as pd

app = FastAPI()

# Load data from the CSV file
data = pd.read_csv('data.csv')

# Create a new record
@app.post("/create_data")
async def create_record(new_data: dict):
    # Check if the required fields exist in the new_data dictionary
    required_fields = ['ID', 'name', 'age']  # Customize this based on your CSV structure
    for field in required_fields:
        if field not in new_data:
            raise HTTPException(status_code=400, detail=f"Missing required field: {field}")

    # Add the new record to the data DataFrame
    data = data.append(new_data, ignore_index=True)

    # Save the updated data back to the CSV file
    data.to_csv('data.csv', index=False)

    return {"message": "Record created successfully"}
            </code>
        </pre>
    </Section>
</section>
<section>
    <h2>Thank you</h2>
    <p>FOr more info vists <b><a href="https://fastapi.tiangolo.com/">FastAPI</a></b>.</p>
</section>
<!-- END OF THE PRESENTATION -->
          </div>
    </div>

    <script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
    <script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.min.js"></script>

    <script>
     // Full list of configuration options available at:
     // https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
       slideNumber:true,
       controls: true,
       progress: true,
       history: true,
       center: true,
       transitionSpeed:'slow',
       previewLinks:true,
       transition: 'convex', // none/fade/slide/convex/concave/zoom
       // Optional reveal.js plugins
       dependencies: [
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/classList.js',
       condition: function() { return !document.body.classList; } },
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/marked.js',
       condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/markdown.js',
       condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/highlight/highlight.js',
       async: true,
       condition: function() { return !!document.querySelector( 'pre code' ); },
       callback: function() { hljs.initHighlightingOnLoad(); } },
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/zoom-js/zoom.js', async: true },
     { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/notes/notes.js', async: true }
       ]
     });
    </script>

    div {
  background-color: lightgrey;
  width: 300px;
  border: 15px solid green;
  padding: 50px;
  margin: 20px;
  text-align:center;
}
</style>
</head>
<body>

<h2>Demonstrating the Box Model</h2>

<p>borders; padding; margins; and the actual content.</p>

<div>Some text in Div</div>

</body>

    </body>
</html>
